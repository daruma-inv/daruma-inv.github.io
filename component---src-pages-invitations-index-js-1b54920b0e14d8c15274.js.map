{"version":3,"sources":["webpack://corporate/./src/components/invitations/clients-friends.js","webpack://corporate/./src/pages/invitations/index.js"],"names":["props","useState","clientsFriend","friendName","initialFriendName","setInitialFriendName","yourName","initialYourName","setInitialYourName","note","initialNote","setInitialNote","uuid","setUuid","setFriendName","setYourName","setNote","disabledUpdateButton","setDisabledUpdateButton","disabledUndoButton","setDisabledUndoButton","createdAt","setCreatedAt","updatedAt","setUpdatedAt","createdBy","setCreatedBy","updatedBy","setUpdatedBy","isOpenDialog","setIsOpenDialog","shareUrl","setShareUrl","qrImage","setQrImage","useEffect","_shareUrl","process","qr","_qrImage","console","error","f","handleClickUpdateButton","fetch","method","body","JSON","stringify","res","status","Error","json","_friendName","_yourName","_note","_createdAt","_updatedAt","_createdBy","_updatedBy","alert","log","handleClickDeleteOk","reload","handleCloseDialog","TableRow","hover","selected","TableCell","Link","href","target","src","style","width","height","TextField","value","onChange","isDiff","multiline","Stack","direction","spacing","Tooltip","title","IconButton","color","aria-label","size","disabled","onClick","SaveAs","fontSize","Undo","DeleteForever","Typography","variant","dateFormat","Dialog","open","onClose","aria-labelledby","aria-describedby","DialogTitle","id","DialogContent","DialogContentText","DialogActions","Button","autoFocus","isOpenSnackbar","setIsOpenSnackbar","severity","setSeverity","message","setMessage","newFriendName","setNewFriendName","newYourName","setNewYourName","newFriendNote","setNewFriendNote","isDisabledNewButton","setIsDisabledNewButton","partnersClientUuid","useQueryParam","StringParam","clientsFriends","setClientsFriends","yourPartnerName","setYourPartnerName","isNotFound","setIsNotFound","setReload","resInfo","infoData","data","name","partner","lastNameKanji","align","mt","Helmet","AppBar","position","sx","backgroundColor","Container","maxWidth","Toolbar","disableGutters","noWrap","fontWeight","mr","display","alignItems","Box","flexGrow","xs","md","flexDirection","justifyContent","my","pl","py","border","borderRadius","label","e","_newFriendName","_newYourName","minWidth","startIcon","Add","TableContainer","Table","TableHead","TableBody","undefined","map","i","key","colSpan","LinearProgress","Snackbar","autoHideDuration","reason","Alert"],"mappings":"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","file":"component---src-pages-invitations-index-js-1b54920b0e14d8c15274.js","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport fetch from 'cross-fetch';\nimport Button from '@mui/material/Button';\nimport Dialog from '@mui/material/Dialog';\nimport DialogActions from '@mui/material/DialogActions';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogContentText from '@mui/material/DialogContentText';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport IconButton from '@mui/material/IconButton';\nimport Link from '@mui/material/Link';\nimport Stack from '@mui/material/Stack';\nimport TableCell from '@mui/material/TableCell';\nimport TableRow from '@mui/material/TableRow';\nimport TextField from '@mui/material/TextField';\nimport Tooltip from '@mui/material/Tooltip';\nimport Typography from '@mui/material/Typography';\nimport DeleteForeverIcon from '@mui/icons-material/DeleteForever';\nimport SaveAsIcon from '@mui/icons-material/SaveAs';\nimport UndoIcon from '@mui/icons-material/Undo';\nimport dateFormat from '@libs/dateFormat';\nimport qr from 'qrcode';\n\nconst ClientsFriends = props => {\n  const [initialFriendName, setInitialFriendName] = useState(\n    props.clientsFriend.friendName\n  );\n  const [initialYourName, setInitialYourName] = useState(\n    props.clientsFriend.yourName\n  );\n  const [initialNote, setInitialNote] = useState(props.clientsFriend.note);\n  const [uuid, setUuid] = useState(props.clientsFriend.uuid);\n  const [friendName, setFriendName] = useState(props.clientsFriend.friendName);\n  const [yourName, setYourName] = useState(props.clientsFriend.yourName);\n  const [note, setNote] = useState(props.clientsFriend.note);\n  const [disabledUpdateButton, setDisabledUpdateButton] = useState(true);\n  const [disabledUndoButton, setDisabledUndoButton] = useState(true);\n  const [createdAt, setCreatedAt] = useState(props.clientsFriend.createdAt);\n  const [updatedAt, setUpdatedAt] = useState(props.clientsFriend.updatedAt);\n  const [createdBy, setCreatedBy] = useState(props.clientsFriend.createdBy);\n  const [updatedBy, setUpdatedBy] = useState(props.clientsFriend.updatedBy);\n\n  const [isOpenDialog, setIsOpenDialog] = useState(false);\n\n  const [shareUrl, setShareUrl] = useState('');\n  const [qrImage, setQrImage] = useState('');\n\n  useEffect(() => {\n    const _shareUrl = `${process.env.URL}foryou/?uuid=${props.clientsFriend.uuid}`;\n\n    const f = async () => {\n      try {\n        const _qrImage = await qr.toDataURL(_shareUrl);\n        setQrImage(_qrImage);\n      } catch (err) {\n        console.error(err);\n      }\n    };\n\n    f();\n\n    setShareUrl(_shareUrl);\n\n    setInitialFriendName(props.clientsFriend.friendName);\n    setInitialYourName(props.clientsFriend.yourName);\n    setInitialNote(props.clientsFriend.note);\n    setUuid(props.clientsFriend.uuid);\n    setFriendName(props.clientsFriend.friendName);\n    setYourName(props.clientsFriend.yourName);\n    setNote(props.clientsFriend.note);\n    setDisabledUpdateButton(true);\n    setDisabledUndoButton(true);\n    setCreatedAt(props.clientsFriend.createdAt);\n    setUpdatedAt(props.clientsFriend.updatedAt);\n    setCreatedBy(props.clientsFriend.createdBy);\n    setUpdatedBy(props.clientsFriend.updatedBy);\n    setIsOpenDialog(false);\n  }, [\n    props.clientsFriend.uuid,\n    props.clientsFriend.friendName,\n    props.clientsFriend.yourName,\n    props.clientsFriend.note,\n    props.clientsFriend.createdAt,\n    props.clientsFriend.updatedAt,\n    props.clientsFriend.createdBy,\n    props.clientsFriend.updatedBy\n  ]);\n\n  const handleChangeFriendName = ({ target: { value } }) => {\n    const isDiff =\n      value !== initialFriendName ||\n      yourName !== initialYourName ||\n      note !== initialNote;\n\n    setDisabledUpdateButton(!(value && isDiff));\n    setDisabledUndoButton(!isDiff);\n    setFriendName(value);\n  };\n\n  const handleChangeYourName = ({ target: { value } }) => {\n    const isDiff =\n      friendName !== initialFriendName ||\n      value !== initialYourName ||\n      note !== initialNote;\n\n    setDisabledUpdateButton(!(friendName && isDiff));\n    setDisabledUndoButton(!isDiff);\n    setYourName(value);\n  };\n\n  const handleChangeNote = ({ target: { value } }) => {\n    const isDiff =\n      friendName !== initialFriendName ||\n      yourName !== initialYourName ||\n      value !== initialNote;\n\n    setDisabledUpdateButton(!(friendName && isDiff));\n    setDisabledUndoButton(!isDiff);\n    setNote(value);\n  };\n\n  const handleClickUpdateButton = async () => {\n    try {\n      const res = await fetch(\n        `${process.env.API_URL}/api/partners/clients/friends/${uuid}`,\n        {\n          method: 'PUT',\n          body: JSON.stringify({\n            friendName,\n            yourName,\n            note,\n            updatedBy: 'user'\n          })\n        }\n      );\n\n      if (res.status >= 400) {\n        throw new Error('Bad response /api/partners/clients');\n      }\n\n      const {\n        friendName: _friendName,\n        yourName: _yourName,\n        note: _note,\n        createdAt: _createdAt,\n        updatedAt: _updatedAt,\n        createdBy: _createdBy,\n        updatedBy: _updatedBy\n      } = await res.json();\n\n      setInitialFriendName(_friendName);\n      setInitialYourName(_yourName);\n      setInitialNote(_note);\n\n      setFriendName(_friendName);\n      setYourName(_yourName);\n      setNote(_note);\n      setDisabledUpdateButton(true);\n      setDisabledUndoButton(true);\n      setCreatedAt(_createdAt);\n      setUpdatedAt(_updatedAt);\n      setCreatedBy(_createdBy);\n      setUpdatedBy(_updatedBy);\n    } catch (e) {\n      alert('error');\n      console.log(e);\n    }\n  };\n\n  const handleClickUndoButton = () => {\n    setFriendName(initialFriendName);\n    setYourName(initialYourName);\n    setNote(initialNote);\n    setDisabledUpdateButton(true);\n    setDisabledUndoButton(true);\n  };\n\n  const handleClickDeleteButton = () => setIsOpenDialog(true);\n\n  const handleClickDeleteOk = async () => {\n    try {\n      const res = await fetch(\n        `${process.env.API_URL}/api/partners/clients/friends/${uuid}`,\n        {\n          method: 'DELETE'\n        }\n      );\n\n      if (res.status >= 400) {\n        throw new Error('Bad response /api/partners/clients/friends');\n      }\n\n      props.reload();\n      setIsOpenDialog(false);\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  const handleCloseDialog = () => setIsOpenDialog(false);\n\n  return (\n    <>\n      <TableRow\n        hover={true}\n        selected={!disabledUpdateButton || !disabledUndoButton}\n      >\n        <TableCell>\n          <Link href={shareUrl} target='_blank'>\n            <img\n              src={qrImage}\n              style={{\n                width: '100px',\n                height: '100px'\n              }}\n            />\n          </Link>\n        </TableCell>\n        <TableCell>\n          <TextField value={friendName} onChange={handleChangeFriendName} />\n        </TableCell>\n        <TableCell>\n          <TextField value={yourName} onChange={handleChangeYourName} />\n        </TableCell>\n        <TableCell>\n          <TextField value={note} multiline onChange={handleChangeNote} />\n        </TableCell>\n        <TableCell>\n          <Stack direction='row' spacing={1}>\n            <Tooltip title='このレコードの変更を保存する'>\n              <span>\n                <IconButton\n                  color='primary'\n                  aria-label='update'\n                  size='large'\n                  disabled={disabledUpdateButton}\n                  onClick={handleClickUpdateButton}\n                >\n                  <SaveAsIcon fontSize='inherit' />\n                </IconButton>\n              </span>\n            </Tooltip>\n            <Tooltip title='このレコードの変更を元に戻す'>\n              <span>\n                <IconButton\n                  aria-label='undo'\n                  size='large'\n                  disabled={disabledUndoButton}\n                  onClick={handleClickUndoButton}\n                >\n                  <UndoIcon fontSize='inherit' />\n                </IconButton>\n              </span>\n            </Tooltip>\n            <Tooltip title='このレコードを削除する'>\n              <IconButton\n                color='error'\n                aria-label='delete'\n                size='large'\n                onClick={handleClickDeleteButton}\n              >\n                <DeleteForeverIcon fontSize='inherit' />\n              </IconButton>\n            </Tooltip>\n          </Stack>\n        </TableCell>\n        <TableCell>\n          <Typography variant='body2'>\n            {dateFormat(createdAt)} <small>作成 ({createdBy})</small>\n          </Typography>\n          <Typography variant='body2'>\n            {dateFormat(updatedAt)} <small>更新 ({updatedBy})</small>\n          </Typography>\n        </TableCell>\n      </TableRow>\n      <Dialog\n        open={isOpenDialog}\n        onClose={handleCloseDialog}\n        aria-labelledby='alert-dialog-title'\n        aria-describedby='alert-dialog-description'\n      >\n        <DialogTitle id='alert-dialog-title'>\n          このレコードの削除しますか？\n        </DialogTitle>\n        <DialogContent>\n          <DialogContentText id='alert-dialog-description'>\n            ご友人、ご知人のお名前　: {initialFriendName}\n            <br />\n            お名前　: {initialYourName}\n            <br />\n            メモ　　: {initialNote}\n            <br />\n            作成日時: {dateFormat(createdAt)} ({createdBy})\n            <br />\n            更新日時: {dateFormat(updatedAt)} ({updatedBy})\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleCloseDialog}>キャンセル</Button>\n          <Button onClick={handleClickDeleteOk} autoFocus>\n            削除する\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  );\n};\n\nexport default ClientsFriends;\n","import React, { useEffect, useState } from 'react';\nimport { Helmet } from 'react-helmet';\nimport fetch from 'cross-fetch';\nimport Alert from '@mui/material/Alert';\nimport AppBar from '@mui/material/AppBar';\nimport Box from '@mui/material/Box';\nimport Button from '@mui/material/Button';\nimport Container from '@mui/material/Container';\nimport LinearProgress from '@mui/material/LinearProgress';\nimport Snackbar from '@mui/material/Snackbar';\nimport Stack from '@mui/material/Stack';\nimport Table from '@mui/material/Table';\nimport TableBody from '@mui/material/TableBody';\nimport TableCell from '@mui/material/TableCell';\nimport TableContainer from '@mui/material/TableContainer';\nimport TableHead from '@mui/material/TableHead';\nimport TableRow from '@mui/material/TableRow';\nimport TextField from '@mui/material/TextField';\nimport Toolbar from '@mui/material/Toolbar';\nimport Typography from '@mui/material/Typography';\nimport AddIcon from '@mui/icons-material/Add';\nimport ClientsFriendsTableRow from '@components/invitations/clients-friends';\nimport { useQueryParam, StringParam } from 'use-query-params';\n\nconst InvitationsIndexPage = () => {\n  const [isOpenSnackbar, setIsOpenSnackbar] = useState(false);\n  const [severity, setSeverity] = useState('info');\n  const [message, setMessage] = useState('');\n\n  // 新規作成フォーム\n  const [newFriendName, setNewFriendName] = useState('');\n  const [newYourName, setNewYourName] = useState('');\n  const [newFriendNote, setNewFriendNote] = useState('');\n  const [isDisabledNewButton, setIsDisabledNewButton] = useState(true);\n  const [partnersClientUuid] = useQueryParam('uuid', StringParam);\n  const [clientsFriends, setClientsFriends] = useState();\n  const [yourName, setYourName] = useState('');\n  const [yourPartnerName, setYourPartnerName] = useState('');\n  const [isNotFound, setIsNotFound] = useState(false);\n\n  const [reload, setReload] = useState(0);\n\n  const handleCloseSnackbar = (e, reason) => {\n    if (reason === 'clickaway') return;\n    setIsOpenSnackbar(false);\n  };\n\n  const handleChangeNewClientNote = ({ target: { value } }) =>\n    setNewFriendNote(value);\n\n  useEffect(() => {\n    if (!partnersClientUuid) return;\n\n    const f = async () => {\n      try {\n        const resInfo = await fetch(\n          `${process.env.API_URL}/api/partners/clients/${partnersClientUuid}`\n        );\n\n        if (resInfo.status === 404) {\n          setIsNotFound(true);\n          throw new Error('Bad response /api/partners/clients/{uuid}');\n        }\n\n        const res = await fetch(\n          `${process.env.API_URL}/api/partners/clients/friends?partners-client-uuid=${partnersClientUuid}`\n        );\n\n        if (res.status >= 400) {\n          throw new Error('Bad response /api/partners/clients/friends{uuid}');\n        }\n\n        const infoData = await resInfo.json();\n        const data = await res.json();\n\n        setYourName(infoData.name);\n        setYourPartnerName(infoData.partner.lastNameKanji);\n        setClientsFriends(data);\n\n        setNewYourName(infoData.name);\n      } catch (e) {\n        console.log(e);\n      }\n    };\n\n    f();\n  }, [reload, partnersClientUuid, isNotFound]);\n\n  if (isNotFound) {\n    return (\n      <Typography align='center' mt={5}>\n        お探しのページは削除されたか見つかりません。\n        <br />\n        <a href='https://daruma-inv.com/'>https://daruma-inv.com/</a>\n      </Typography>\n    );\n  }\n\n  return !partnersClientUuid ? (\n    <></>\n  ) : (\n    <>\n      <Helmet>\n        <title>お客様ご紹介ページ | DARUMA, Inc.</title>\n      </Helmet>\n      <AppBar position='fixed' sx={{ backgroundColor: '#ef8468' }}>\n        <Container maxWidth='xl'>\n          <Toolbar disableGutters>\n            <Typography\n              variant='h6'\n              noWrap\n              fontWeight='bold'\n              sx={{ mr: 2, display: 'flex', alignItems: 'center' }}\n            >\n              {yourName} 様専用 お客様ご紹介ページ <small>(by DARUMA)</small>\n            </Typography>\n            <Box sx={{ flexGrow: 1, display: { xs: 'none', md: 'flex' } }} />\n            <Box display='flex' flexDirection='row' alignItems='center'>\n              <Box\n                display='flex'\n                flexDirection='column'\n                alignItems='center'\n                justifyContent='center'\n              >\n                <Typography fontSize={14} fontWeight='bold'>\n                  DARUMA, Inc.\n                </Typography>\n                <Typography fontSize={10}>[お客様限定]</Typography>\n              </Box>\n            </Box>\n          </Toolbar>\n        </Container>\n      </AppBar>\n      <Container\n        maxWidth='xl'\n        sx={{\n          mt: 10\n        }}\n      >\n        <Typography>\n          <strong>{yourName}</strong>様、DARUMAの {yourPartnerName}{' '}\n          です。いつもお世話になっております。\n        </Typography>\n        <Typography>\n          この機会にぜひご友人、ご知人に DARUMA をご紹介くださいませ。\n        </Typography>\n        <Box\n          display='flex'\n          my={2}\n          pl={2}\n          py={4}\n          sx={{\n            border: '2px solid #ccc',\n            borderRadius: 2\n          }}\n        >\n          <TextField\n            label='ご友人・ご知人のお名前（ニックネーム可）'\n            variant='outlined'\n            value={newFriendName}\n            sx={{\n              width: 320\n            }}\n            onChange={e => {\n              const _newFriendName = e.target.value;\n              setNewFriendName(_newFriendName);\n              setIsDisabledNewButton(!newYourName || !_newFriendName);\n            }}\n          />\n\n          <TextField\n            label='お客様のご氏名（ニックネーム可）'\n            variant='outlined'\n            value={newYourName}\n            sx={{\n              width: 240\n            }}\n            onChange={e => {\n              const _newYourName = e.target.value;\n              setNewYourName(_newYourName);\n              setIsDisabledNewButton(!_newYourName || !newFriendName);\n            }}\n          />\n\n          <TextField\n            label='メモ'\n            variant='outlined'\n            multiline\n            value={newFriendNote}\n            onChange={handleChangeNewClientNote}\n            sx={{\n              minWidth: 320\n            }}\n          />\n          <Button\n            variant='contained'\n            color='primary'\n            startIcon={<AddIcon />}\n            disabled={isDisabledNewButton}\n            onClick={async () => {\n              try {\n                const res = await fetch(\n                  `${process.env.API_URL}/api/partners/clients/friends`,\n                  {\n                    method: 'POST',\n                    body: JSON.stringify({\n                      partnersClientUuid,\n                      friendName: newFriendName,\n                      yourName: newYourName,\n                      note: newFriendNote,\n                      createdBy: 'user'\n                    })\n                  }\n                );\n\n                if (res.status >= 400) {\n                  throw new Error('Bad response /api/partners/clients');\n                }\n\n                setIsOpenSnackbar(true);\n                setSeverity('success');\n                setMessage(`${newFriendName} 様の情報を追加しました`);\n\n                setNewFriendName('');\n                setNewYourName('');\n                setNewFriendNote('');\n                setIsDisabledNewButton(true);\n\n                setReload(reload + 1);\n              } catch (e) {\n                alert('error');\n                console.log(e);\n              }\n            }}\n          >\n            新規作成\n          </Button>\n        </Box>\n        <TableContainer>\n          <Table>\n            <TableHead>\n              <TableRow>\n                <TableCell>URL</TableCell>\n                <TableCell>顧客名</TableCell>\n                <TableCell>担当者</TableCell>\n                <TableCell>メモ</TableCell>\n                <TableCell>操作</TableCell>\n                <TableCell>タイムスタンプ</TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {clientsFriends === undefined || !clientsFriends[0] ? (\n                <TableRow>\n                  <TableCell colSpan={6}>\n                    <Typography align='center'>\n                      {clientsFriends === undefined ? (\n                        <>\n                          Loading...\n                          <LinearProgress />\n                        </>\n                      ) : (\n                        'まだご紹介データがありません。『新規作成』より作成ください。'\n                      )}\n                    </Typography>\n                  </TableCell>\n                </TableRow>\n              ) : (\n                clientsFriends.map((clientsFriend, i) => (\n                  <ClientsFriendsTableRow\n                    key={i}\n                    clientsFriend={clientsFriend}\n                    reload={() => setReload(reload + 1)}\n                  />\n                ))\n              )}\n            </TableBody>\n          </Table>\n        </TableContainer>\n        <Stack spacing={2} sx={{ width: '100%' }}>\n          <Snackbar\n            open={isOpenSnackbar}\n            autoHideDuration={5000}\n            onClose={handleCloseSnackbar}\n          >\n            <Alert severity={severity}>{message}</Alert>\n          </Snackbar>\n        </Stack>\n      </Container>\n    </>\n  );\n};\n\nexport default InvitationsIndexPage;\n"],"sourceRoot":""}