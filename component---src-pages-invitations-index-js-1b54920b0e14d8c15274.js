(self.webpackChunkcorporate=self.webpackChunkcorporate||[]).push([[659],{1623:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return J}});var r=n(2137),a=n(7757),l=n.n(a),c=n(7294),i=n(5414),s=n(4944),u=n.n(s),o=n(6320),d=n(5190),m=n(9211),p=n(6968),E=n(5616),f=n(5437),Z=n(5749),v=n(4382),h=n(2664),x=n(7783),y=n(943),g=n(5319),b=n(7708),F=n(3182),S=n(7216),w=n(7098),k=n(9308),C=n(3015),N=n(1359),A=n(8599),B=n(6763),D=n(460),U=n(5497),z=n(581),R=n(6190),W=n(26),I=n(5985),j=n(9656),M=n(7962),L=n(5421),O=n(631),T=function(e){var t=(0,c.useState)(e.clientsFriend.friendName),n=t[0],a=t[1],i=(0,c.useState)(e.clientsFriend.yourName),s=i[0],o=i[1],d=(0,c.useState)(e.clientsFriend.note),m=d[0],E=d[1],f=(0,c.useState)(e.clientsFriend.uuid),Z=f[0],h=f[1],x=(0,c.useState)(e.clientsFriend.friendName),g=x[0],b=x[1],w=(0,c.useState)(e.clientsFriend.yourName),C=w[0],T=w[1],G=(0,c.useState)(e.clientsFriend.note),J=G[0],P=G[1],q=(0,c.useState)(!0),H=q[0],K=q[1],_=(0,c.useState)(!0),Q=_[0],V=_[1],X=(0,c.useState)(e.clientsFriend.createdAt),Y=X[0],$=X[1],ee=(0,c.useState)(e.clientsFriend.updatedAt),te=ee[0],ne=ee[1],re=(0,c.useState)(e.clientsFriend.createdBy),ae=re[0],le=re[1],ce=(0,c.useState)(e.clientsFriend.updatedBy),ie=ce[0],se=ce[1],ue=(0,c.useState)(!1),oe=ue[0],de=ue[1],me=(0,c.useState)(""),pe=me[0],Ee=me[1],fe=(0,c.useState)(""),Ze=fe[0],ve=fe[1];(0,c.useEffect)((function(){var t="https://daruma-inv.com/foryou/?uuid="+e.clientsFriend.uuid;(function(){var e=(0,r.Z)(l().mark((function e(){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.toDataURL(t);case 3:n=e.sent,ve(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()(),Ee(t),a(e.clientsFriend.friendName),o(e.clientsFriend.yourName),E(e.clientsFriend.note),h(e.clientsFriend.uuid),b(e.clientsFriend.friendName),T(e.clientsFriend.yourName),P(e.clientsFriend.note),K(!0),V(!0),$(e.clientsFriend.createdAt),ne(e.clientsFriend.updatedAt),le(e.clientsFriend.createdBy),se(e.clientsFriend.updatedBy),de(!1)}),[e.clientsFriend.uuid,e.clientsFriend.friendName,e.clientsFriend.yourName,e.clientsFriend.note,e.clientsFriend.createdAt,e.clientsFriend.updatedAt,e.clientsFriend.createdBy,e.clientsFriend.updatedBy]);var he=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,r,c,i,s,d,m,p;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u()("https://api.eleven-cloud.com/api/partners/clients/friends/"+Z,{method:"PUT",body:JSON.stringify({friendName:g,yourName:C,note:J,updatedBy:"user"})});case 3:if(!((t=e.sent).status>=400)){e.next=6;break}throw new Error("Bad response /api/partners/clients");case 6:return e.next=8,t.json();case 8:n=e.sent,r=n.friendName,c=n.yourName,i=n.note,s=n.createdAt,d=n.updatedAt,m=n.createdBy,p=n.updatedBy,a(r),o(c),E(i),b(r),T(c),P(i),K(!0),V(!0),$(s),ne(d),le(m),se(p),e.next=34;break;case 30:e.prev=30,e.t0=e.catch(0),alert("error"),console.log(e.t0);case 34:case"end":return e.stop()}}),e,null,[[0,30]])})));return function(){return e.apply(this,arguments)}}(),xe=function(){var t=(0,r.Z)(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u()("https://api.eleven-cloud.com/api/partners/clients/friends/"+Z,{method:"DELETE"});case 3:if(!(t.sent.status>=400)){t.next=6;break}throw new Error("Bad response /api/partners/clients/friends");case 6:e.reload(),de(!1),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}}(),ye=function(){return de(!1)};return c.createElement(c.Fragment,null,c.createElement(F.Z,{hover:!0,selected:!H||!Q},c.createElement(y.Z,null,c.createElement(R.Z,{href:pe,target:"_blank"},c.createElement("img",{src:Ze,style:{width:"100px",height:"100px"}}))),c.createElement(y.Z,null,c.createElement(S.Z,{value:g,onChange:function(e){var t=e.target.value,r=t!==n||C!==s||J!==m;K(!(t&&r)),V(!r),b(t)}})),c.createElement(y.Z,null,c.createElement(S.Z,{value:C,onChange:function(e){var t=e.target.value,r=g!==n||t!==s||J!==m;K(!(g&&r)),V(!r),T(t)}})),c.createElement(y.Z,null,c.createElement(S.Z,{value:J,multiline:!0,onChange:function(e){var t=e.target.value,r=g!==n||C!==s||t!==m;K(!(g&&r)),V(!r),P(t)}})),c.createElement(y.Z,null,c.createElement(v.Z,{direction:"row",spacing:1},c.createElement(W.Z,{title:"このレコードの変更を保存する"},c.createElement("span",null,c.createElement(z.Z,{color:"primary","aria-label":"update",size:"large",disabled:H,onClick:he},c.createElement(j.Z,{fontSize:"inherit"})))),c.createElement(W.Z,{title:"このレコードの変更を元に戻す"},c.createElement("span",null,c.createElement(z.Z,{"aria-label":"undo",size:"large",disabled:Q,onClick:function(){b(n),T(s),P(m),K(!0),V(!0)}},c.createElement(M.Z,{fontSize:"inherit"})))),c.createElement(W.Z,{title:"このレコードを削除する"},c.createElement(z.Z,{color:"error","aria-label":"delete",size:"large",onClick:function(){return de(!0)}},c.createElement(I.Z,{fontSize:"inherit"}))))),c.createElement(y.Z,null,c.createElement(k.Z,{variant:"body2"},(0,L.Z)(Y)," ",c.createElement("small",null,"作成 (",ae,")")),c.createElement(k.Z,{variant:"body2"},(0,L.Z)(te)," ",c.createElement("small",null,"更新 (",ie,")")))),c.createElement(N.Z,{open:oe,onClose:ye,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},c.createElement(U.Z,{id:"alert-dialog-title"},"このレコードの削除しますか？"),c.createElement(B.Z,null,c.createElement(D.Z,{id:"alert-dialog-description"},"ご友人、ご知人のお名前　: ",n,c.createElement("br",null),"お名前　: ",s,c.createElement("br",null),"メモ　　: ",m,c.createElement("br",null),"作成日時: ",(0,L.Z)(Y)," (",ae,")",c.createElement("br",null),"更新日時: ",(0,L.Z)(te)," (",ie,")")),c.createElement(A.Z,null,c.createElement(p.Z,{onClick:ye},"キャンセル"),c.createElement(p.Z,{onClick:xe,autoFocus:!0},"削除する"))))},G=n(9339),J=function(){var e=(0,c.useState)(!1),t=e[0],n=e[1],a=(0,c.useState)("info"),s=a[0],N=a[1],A=(0,c.useState)(""),B=A[0],D=A[1],U=(0,c.useState)(""),z=U[0],R=U[1],W=(0,c.useState)(""),I=W[0],j=W[1],M=(0,c.useState)(""),L=M[0],O=M[1],J=(0,c.useState)(!0),P=J[0],q=J[1],H=(0,G.Wd)("uuid",G.Zp)[0],K=(0,c.useState)(),_=K[0],Q=K[1],V=(0,c.useState)(""),X=V[0],Y=V[1],$=(0,c.useState)(""),ee=$[0],te=$[1],ne=(0,c.useState)(!1),re=ne[0],ae=ne[1],le=(0,c.useState)(0),ce=le[0],ie=le[1];return(0,c.useEffect)((function(){H&&function(){var e=(0,r.Z)(l().mark((function e(){var t,n,r,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u()("https://api.eleven-cloud.com/api/partners/clients/"+H);case 3:if(404!==(t=e.sent).status){e.next=7;break}throw ae(!0),new Error("Bad response /api/partners/clients/{uuid}");case 7:return e.next=9,u()("https://api.eleven-cloud.com/api/partners/clients/friends?partners-client-uuid="+H);case 9:if(!((n=e.sent).status>=400)){e.next=12;break}throw new Error("Bad response /api/partners/clients/friends{uuid}");case 12:return e.next=14,t.json();case 14:return r=e.sent,e.next=17,n.json();case 17:a=e.sent,Y(r.name),te(r.partner.lastNameKanji),Q(a),j(r.name),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(0),console.log(e.t0);case 27:case"end":return e.stop()}}),e,null,[[0,24]])})));return function(){return e.apply(this,arguments)}}()()}),[ce,H,re]),re?c.createElement(k.Z,{align:"center",mt:5},"お探しのページは削除されたか見つかりません。",c.createElement("br",null),c.createElement("a",{href:"https://daruma-inv.com/"},"https://daruma-inv.com/")):H?c.createElement(c.Fragment,null,c.createElement(i.q,null,c.createElement("title",null,"お客様ご紹介ページ | DARUMA, Inc.")),c.createElement(d.Z,{position:"fixed",sx:{backgroundColor:"#ef8468"}},c.createElement(E.Z,{maxWidth:"xl"},c.createElement(w.Z,{disableGutters:!0},c.createElement(k.Z,{variant:"h6",noWrap:!0,fontWeight:"bold",sx:{mr:2,display:"flex",alignItems:"center"}},X," 様専用 お客様ご紹介ページ ",c.createElement("small",null,"(by DARUMA)")),c.createElement(m.Z,{sx:{flexGrow:1,display:{xs:"none",md:"flex"}}}),c.createElement(m.Z,{display:"flex",flexDirection:"row",alignItems:"center"},c.createElement(m.Z,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},c.createElement(k.Z,{fontSize:14,fontWeight:"bold"},"DARUMA, Inc."),c.createElement(k.Z,{fontSize:10},"[お客様限定]")))))),c.createElement(E.Z,{maxWidth:"xl",sx:{mt:10}},c.createElement(k.Z,null,c.createElement("strong",null,X),"様、DARUMAの ",ee," ","です。いつもお世話になっております。"),c.createElement(k.Z,null,"この機会にぜひご友人、ご知人に DARUMA をご紹介くださいませ。"),c.createElement(m.Z,{display:"flex",my:2,pl:2,py:4,sx:{border:"2px solid #ccc",borderRadius:2}},c.createElement(S.Z,{label:"ご友人・ご知人のお名前（ニックネーム可）",variant:"outlined",value:z,sx:{width:320},onChange:function(e){var t=e.target.value;R(t),q(!I||!t)}}),c.createElement(S.Z,{label:"お客様のご氏名（ニックネーム可）",variant:"outlined",value:I,sx:{width:240},onChange:function(e){var t=e.target.value;j(t),q(!t||!z)}}),c.createElement(S.Z,{label:"メモ",variant:"outlined",multiline:!0,value:L,onChange:function(e){var t=e.target.value;return O(t)},sx:{minWidth:320}}),c.createElement(p.Z,{variant:"contained",color:"primary",startIcon:c.createElement(C.Z,null),disabled:P,onClick:(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u()("https://api.eleven-cloud.com/api/partners/clients/friends",{method:"POST",body:JSON.stringify({partnersClientUuid:H,friendName:z,yourName:I,note:L,createdBy:"user"})});case 3:if(!(e.sent.status>=400)){e.next=6;break}throw new Error("Bad response /api/partners/clients");case 6:n(!0),N("success"),D(z+" 様の情報を追加しました"),R(""),j(""),O(""),q(!0),ie(ce+1),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),alert("error"),console.log(e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,16]])})))},"新規作成")),c.createElement(g.Z,null,c.createElement(h.Z,null,c.createElement(b.Z,null,c.createElement(F.Z,null,c.createElement(y.Z,null,"URL"),c.createElement(y.Z,null,"顧客名"),c.createElement(y.Z,null,"担当者"),c.createElement(y.Z,null,"メモ"),c.createElement(y.Z,null,"操作"),c.createElement(y.Z,null,"タイムスタンプ"))),c.createElement(x.Z,null,void 0!==_&&_[0]?_.map((function(e,t){return c.createElement(T,{key:t,clientsFriend:e,reload:function(){return ie(ce+1)}})})):c.createElement(F.Z,null,c.createElement(y.Z,{colSpan:6},c.createElement(k.Z,{align:"center"},void 0===_?c.createElement(c.Fragment,null,"Loading...",c.createElement(f.Z,null)):"まだご紹介データがありません。『新規作成』より作成ください。")))))),c.createElement(v.Z,{spacing:2,sx:{width:"100%"}},c.createElement(Z.Z,{open:t,autoHideDuration:5e3,onClose:function(e,t){"clickaway"!==t&&n(!1)}},c.createElement(o.Z,{severity:s},B))))):c.createElement(c.Fragment,null)}}}]);
//# sourceMappingURL=component---src-pages-invitations-index-js-1b54920b0e14d8c15274.js.map