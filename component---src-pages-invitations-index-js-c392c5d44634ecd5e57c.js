"use strict";(self.webpackChunkcorporate=self.webpackChunkcorporate||[]).push([[401],{5985:function(e,t,n){var r=n(5318);t.Z=void 0;var a=r(n(2174)),l=n(5893),c=(0,a.default)((0,l.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12 1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}),"DeleteForever");t.Z=c},2068:function(e,t,n){var r=n(5318);t.Z=void 0;var a=r(n(2174)),l=n(5893),c=(0,a.default)((0,l.jsx)("path",{d:"M21 10.12h-6.78l2.74-2.82c-2.73-2.7-7.15-2.8-9.88-.1-2.73 2.71-2.73 7.08 0 9.79s7.15 2.71 9.88 0C18.32 15.65 19 14.08 19 12.1h2c0 1.98-.88 4.55-2.64 6.29-3.51 3.48-9.21 3.48-12.72 0-3.5-3.47-3.53-9.11-.02-12.58s9.14-3.47 12.65 0L21 3v7.12zM12.5 8v4.25l3.5 2.08-.72 1.21L11 13V8h1.5z"}),"Update");t.Z=c},7853:function(e,t,n){n.r(t),n.d(t,{default:function(){return ee}});var r=n(5861),a=n(7757),l=n.n(a),c=n(7294),i=n(5414),s=n(4944),u=n.n(s),o=n(6320),m=n(5190),d=n(9211),p=n(6968),E=n(5616),Z=n(3827),f=n(8423),v=n(4334),h=n(5437),x=n(9077),y=n(4202),b=n(5749),g=n(4382),w=n(2664),S=n(7783),F=n(943),k=n(5319),C=n(7708),A=n(3182),N=n(7216),z=n(7098),D=n(9308),B=n(3015),I=n(1359),L=n(8599),U=n(6763),R=n(460),W=n(5497),M=n(581),T=n(26),j=n(8115),P=n(5985),O=n(7485),H=n(8679),J=n(9656),V=n(3741),q=n(7962),G=n(2068),_=n(4093),K=n(8430),Q=n(631),X=n(8552),Y=function(e){var t=(0,c.useState)(e.clientsFriend.friendName),n=t[0],a=t[1],i=(0,c.useState)(e.clientsFriend.yourName),s=i[0],o=i[1],m=(0,c.useState)(e.clientsFriend.note),E=m[0],Z=m[1],v=(0,c.useState)(e.clientsFriend.uuid),h=v[0],b=v[1],w=(0,c.useState)(e.clientsFriend.friendName),S=w[0],k=w[1],C=(0,c.useState)(e.clientsFriend.yourName),z=C[0],B=C[1],Y=(0,c.useState)(e.clientsFriend.note),$=Y[0],ee=Y[1],te=(0,c.useState)(!0),ne=te[0],re=te[1],ae=(0,c.useState)(!0),le=ae[0],ce=ae[1],ie=(0,c.useState)(e.clientsFriend.validTimestamp),se=ie[0],ue=ie[1],oe=(0,c.useState)(e.clientsFriend.createdAt),me=oe[0],de=oe[1],pe=(0,c.useState)(e.clientsFriend.updatedAt),Ee=pe[0],Ze=pe[1],fe=(0,c.useState)(e.clientsFriend.createdBy),ve=(fe[0],fe[1]),he=(0,c.useState)(e.clientsFriend.updatedBy),xe=(he[0],he[1]),ye=(0,c.useState)(!1),be=ye[0],ge=ye[1],we=(0,c.useState)(!1),Se=we[0],Fe=we[1],ke=(0,c.useState)(""),Ce=ke[0],Ae=ke[1],Ne=(0,c.useState)(""),ze=Ne[0],De=Ne[1];(0,c.useEffect)((function(){var t="https://daruma-inv.com/foryou/?uuid="+e.clientsFriend.uuid,n=function(){var e=(0,r.Z)(l().mark((function e(){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Q.toDataURL(t);case 3:n=e.sent,De(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();n(),Ae(t),a(e.clientsFriend.friendName),o(e.clientsFriend.yourName),Z(e.clientsFriend.note),b(e.clientsFriend.uuid),k(e.clientsFriend.friendName),B(e.clientsFriend.yourName),ee(e.clientsFriend.note),re(!0),ce(!0),ue(e.clientsFriend.validTimestamp),de(e.clientsFriend.createdAt),Ze(e.clientsFriend.updatedAt),ve(e.clientsFriend.createdBy),xe(e.clientsFriend.updatedBy)}),[e.clientsFriend.uuid,e.clientsFriend.friendName,e.clientsFriend.yourName,e.clientsFriend.note,e.clientsFriend.validTimestamp,e.clientsFriend.createdAt,e.clientsFriend.updatedAt,e.clientsFriend.createdBy,e.clientsFriend.updatedBy]);var Be,Ie=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u()("https://api.eleven-cloud.com/api/partners/clients/friends/"+h,{method:"PUT",body:JSON.stringify({validTimestamp:new Date})});case 3:if(!((t=e.sent).status>=400)){e.next=6;break}throw new Error("Bad response /api/partners/clients");case 6:return e.next=8,t.json();case 8:n=e.sent,r=n.validTimestamp,console.log(r),ue(r),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),alert("error"),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),Le=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,r,c,i,s,m,d,p;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u()("https://api.eleven-cloud.com/api/partners/clients/friends/"+h,{method:"PUT",body:JSON.stringify({friendName:S,yourName:z,note:$,updatedBy:"user"})});case 3:if(!((t=e.sent).status>=400)){e.next=6;break}throw new Error("Bad response /api/partners/clients");case 6:return e.next=8,t.json();case 8:n=e.sent,r=n.friendName,c=n.yourName,i=n.note,s=n.createdAt,m=n.updatedAt,d=n.createdBy,p=n.updatedBy,a(r),o(c),Z(i),k(r),B(c),ee(i),re(!0),ce(!0),de(s),Ze(m),ve(d),xe(p),e.next=34;break;case 30:e.prev=30,e.t0=e.catch(0),alert("error"),console.log(e.t0);case 34:case"end":return e.stop()}}),e,null,[[0,30]])})));return function(){return e.apply(this,arguments)}}(),Ue=function(){var t=(0,r.Z)(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u()("https://api.eleven-cloud.com/api/partners/clients/friends/"+h,{method:"DELETE"});case 3:if(!(t.sent.status>=400)){t.next=6;break}throw new Error("Bad response /api/partners/clients/friends");case 6:e.reload(),ge(!1),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}}(),Re=function(){return ge(!1)},We=function(){var e=(0,c.useState)(!1),t=e[0],n=e[1];return c.createElement(X.CopyToClipboard,{text:Ce,onCopy:function(){return n(!0)}},c.createElement(T.Z,{onClose:function(){return n(!1)},open:t,title:"コピーしました"},c.createElement(p.Z,{fullWidth:!0,variant:"outlined",size:"small",startIcon:c.createElement(j.Z,null)},"URLをコピーする")))};return c.createElement(c.Fragment,null,c.createElement(A.Z,{hover:!0,selected:!ne||!le},c.createElement(F.Z,null,c.createElement(d.Z,{display:"flex",flexDirection:"column"},c.createElement(d.Z,null,c.createElement(p.Z,{fullWidth:!0,variant:"outlined",size:"small",startIcon:c.createElement(_.Z,null),onClick:function(){Fe(!0)}},"QRを表示する"),c.createElement(d.Z,{mt:1},c.createElement(We,null)),c.createElement(d.Z,{mt:1},c.createElement(p.Z,{fullWidth:!0,variant:"outlined",size:"small",startIcon:c.createElement(V.Z,null),onClick:function(){window.location.href="mailto:?subject=一緒にコンパクトウシを始めませんか？&body="+S+"様%0D%0A%0D%0A【コンパクトウシのご案内】%0D%0A"+Ce+"%0D%0A%0D%0A"+z}},"メールで送る")),c.createElement(d.Z,{mt:1},c.createElement(p.Z,{fullWidth:!0,variant:"outlined",size:"small",color:"success",startIcon:c.createElement(O.Z,null),onClick:function(){var e="https://social-plugins.line.me/lineit/share?url="+Ce;window.open(e,"_blank","noreferrer")}},"LINEで送る")),c.createElement(d.Z,{mt:1},c.createElement(p.Z,{fullWidth:!0,size:"small",color:"warning",endIcon:c.createElement(H.Z,null),onClick:function(){return window.open(Ce,"_blank","noreferrer")}},"ご紹介ページを確認する"))),c.createElement(I.Z,{open:Se,onClose:function(){return Fe(!1)}},c.createElement(W.Z,null,c.createElement(D.Z,{variant:"h6",textAlign:"center"},S,"様へのコンパクトウシご案内URL")),c.createElement(U.Z,null,c.createElement(R.Z,null,c.createElement("img",{src:ze,style:{display:"block",margin:"0 auto",width:"100px",height:"100px"}}),Ce,c.createElement(We,null)))))),c.createElement(F.Z,null,c.createElement(N.Z,{value:S,onChange:function(e){var t=e.target.value,r=t!==n||z!==s||$!==E;re(!(t&&r)),ce(!r),k(t)},InputProps:{endAdornment:c.createElement(f.Z,{position:"end"},"様")}})),c.createElement(F.Z,null,c.createElement(N.Z,{value:z,onChange:function(e){var t=e.target.value,r=S!==n||t!==s||$!==E;re(!(S&&r)),ce(!r),B(t)},InputProps:{endAdornment:c.createElement(f.Z,{position:"end"},"様")}})),c.createElement(F.Z,null,c.createElement(y.Z,{value:$,onChange:function(e){var t=e.target.value,r=S!==n||z!==s||t!==E;re(!(S&&r)),ce(!r),ee(t)},inputProps:{readOnly:!0}},c.createElement(x.Z,{value:"職場同僚"},"職場同僚"),c.createElement(x.Z,{value:"友人"},"友人"),c.createElement(x.Z,{value:"親族"},"親族"),c.createElement(x.Z,{value:"取引先"},"取引先"),c.createElement(x.Z,{value:"その他"},"その他"))),c.createElement(F.Z,null,c.createElement(g.Z,{direction:"column",spacing:1},c.createElement(T.Z,{title:"有効期限を延長する"},c.createElement("span",null,c.createElement(M.Z,{color:"primary","aria-label":"update",size:"large",onClick:Ie},c.createElement(G.Z,{fontSize:"inherit"})))),c.createElement(T.Z,{title:"このレコードの変更を保存する"},c.createElement("span",null,c.createElement(M.Z,{color:"primary","aria-label":"update",size:"large",disabled:ne,onClick:Le},c.createElement(J.Z,{fontSize:"inherit"})))),c.createElement(T.Z,{title:"このレコードの変更を元に戻す"},c.createElement("span",null,c.createElement(M.Z,{color:"warning","aria-label":"undo",size:"large",disabled:le,onClick:function(){k(n),B(s),ee(E),re(!0),ce(!0)}},c.createElement(q.Z,{fontSize:"inherit"})))),c.createElement(T.Z,{title:"このレコードを削除する"},c.createElement("span",null,c.createElement(M.Z,{color:"error","aria-label":"delete",size:"large",onClick:function(){return ge(!0)}},c.createElement(P.Z,{fontSize:"inherit"})))))),c.createElement(F.Z,null,c.createElement(D.Z,{variant:"body2",color:"primary"},(0,K.Z)(((Be=new Date(se)).setMonth(Be.getMonth()+1),Be))," ",c.createElement("small",null,"(有効期限)")),c.createElement("br",null),c.createElement(D.Z,{variant:"body2"},(0,K.Z)(me)," ",c.createElement("small",null,"作成")),c.createElement(D.Z,{variant:"body2"},(0,K.Z)(Ee)," ",c.createElement("small",null,"更新")))),c.createElement(I.Z,{open:be,onClose:Re,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},c.createElement(W.Z,{id:"alert-dialog-title"},"このレコードの削除しますか？"),c.createElement(U.Z,null,c.createElement(R.Z,{id:"alert-dialog-description"},"ご友人、ご知人のお名前　: ",n,c.createElement("br",null),"お名前　: ",s,c.createElement("br",null),"メモ　　: ",E,c.createElement("br",null),"作成日時: ",(0,K.Z)(me),c.createElement("br",null),"更新日時: ",(0,K.Z)(Ee))),c.createElement(L.Z,null,c.createElement(p.Z,{onClick:Re},"キャンセル"),c.createElement(p.Z,{onClick:Ue,autoFocus:!0},"削除する"))))},$=n(9339),ee=function(){var e=(0,c.useState)(!1),t=e[0],n=e[1],a=(0,c.useState)("info"),s=a[0],I=a[1],L=(0,c.useState)(""),U=L[0],R=L[1],W=(0,c.useState)(""),M=W[0],T=W[1],j=(0,c.useState)(""),P=j[0],O=j[1],H=(0,c.useState)(""),J=H[0],V=H[1],q=(0,c.useState)(!0),G=q[0],_=q[1],K=(0,$.Wd)("uuid",$.Zp)[0],Q=(0,c.useState)(),X=Q[0],ee=Q[1],te=(0,c.useState)(""),ne=te[0],re=te[1],ae=(0,c.useState)(""),le=ae[0],ce=ae[1],ie=(0,c.useState)(!1),se=ie[0],ue=ie[1],oe=(0,c.useState)(0),me=oe[0],de=oe[1];return(0,c.useEffect)((function(){if(K){var e=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,r,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u()("https://api.eleven-cloud.com/api/partners/clients/"+K);case 3:if(404!==(t=e.sent).status){e.next=7;break}throw ue(!0),new Error("Bad response /api/partners/clients/{uuid}");case 7:return e.next=9,u()("https://api.eleven-cloud.com/api/partners/clients/friends?partners-client-uuid="+K);case 9:if(!((n=e.sent).status>=400)){e.next=12;break}throw new Error("Bad response /api/partners/clients/friends{uuid}");case 12:return e.next=14,t.json();case 14:return r=e.sent,e.next=17,n.json();case 17:a=e.sent,re(r.name),ce(r.partner.lastNameKanji),ee(a),O(r.name),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(0),console.log(e.t0);case 27:case"end":return e.stop()}}),e,null,[[0,24]])})));return function(){return e.apply(this,arguments)}}();e()}}),[me,K,se]),se?c.createElement(D.Z,{align:"center",mt:5},"お探しのページは削除されたか見つかりません。",c.createElement("br",null),c.createElement("a",{href:"https://daruma-inv.com/"},"https://daruma-inv.com/")):K?c.createElement(c.Fragment,null,c.createElement(i.q,null,c.createElement("title",null,"お客様ご紹介ページ | DARUMA, Inc.")),c.createElement(m.Z,{position:"fixed",sx:{backgroundColor:"#ef8468"}},c.createElement(E.Z,{maxWidth:"xl"},c.createElement(z.Z,{disableGutters:!0},c.createElement(D.Z,{variant:"h6",noWrap:!0,fontWeight:"bold",sx:{mr:2,display:"flex",alignItems:"center"}},ne," 様専用 お客様ご紹介ページ ",c.createElement("small",null,"(by DARUMA)")),c.createElement(d.Z,{sx:{flexGrow:1,display:{xs:"none",md:"flex"}}}),c.createElement(d.Z,{display:"flex",flexDirection:"row",alignItems:"center"},c.createElement(d.Z,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},c.createElement(D.Z,{fontSize:14,fontWeight:"bold"},"DARUMA, Inc."),c.createElement(D.Z,{fontSize:10},"[お客様限定]")))))),c.createElement(E.Z,{maxWidth:"xl",sx:{mt:10}},c.createElement(D.Z,null,c.createElement("strong",null,ne),"様、DARUMAの ",le," ","です。いつもお世話になっております。"),c.createElement(D.Z,null,"この機会にぜひご友人、ご知人に DARUMA をご紹介くださいませ。"),c.createElement(D.Z,{variant:"body2",color:"error"},"※URLは有効期限1カ月となり、期日を過ぎますとアクセス出来なくなりますのでご了承下さい"),c.createElement(d.Z,{display:"flex",my:2,pl:2,py:4,sx:{border:"2px solid #ccc",borderRadius:2}},c.createElement(N.Z,{label:"ご友人・ご知人のお名前（ニックネーム可）",variant:"outlined",value:M,sx:{width:320},InputProps:{endAdornment:c.createElement(f.Z,{position:"end"},"様")},onChange:function(e){var t=e.target.value;T(t),_(!P||!t||!J)}}),c.createElement(N.Z,{label:"お客様のご氏名（ニックネーム可）",variant:"outlined",value:P,InputProps:{endAdornment:c.createElement(f.Z,{position:"end"},"様")},sx:{width:240},onChange:function(e){var t=e.target.value;O(t),_(!t||!M||!J)}}),c.createElement(Z.Z,{required:!0,sx:{minWidth:120}},c.createElement(v.Z,null,"ご関係"),c.createElement(y.Z,{value:J,onChange:function(e){var t=e.target.value;V(t),_(!P||!M||!t)},label:"ご関係"},c.createElement(x.Z,{value:"職場同僚"},"職場同僚"),c.createElement(x.Z,{value:"友人"},"友人"),c.createElement(x.Z,{value:"親族"},"親族"),c.createElement(x.Z,{value:"取引先"},"取引先"),c.createElement(x.Z,{value:"その他"},"その他"))),c.createElement(p.Z,{variant:"contained",color:"primary",startIcon:c.createElement(B.Z,null),disabled:G,onClick:(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u()("https://api.eleven-cloud.com/api/partners/clients/friends",{method:"POST",body:JSON.stringify({partnersClientUuid:K,friendName:M,yourName:P,note:J,createdBy:"user"})});case 3:if(!(e.sent.status>=400)){e.next=6;break}throw new Error("Bad response /api/partners/clients");case 6:n(!0),I("success"),R(M+" 様の情報を追加しました"),T(""),O(""),V(""),_(!0),de(me+1),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),alert("error"),console.log(e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,16]])})))},"新規作成")),c.createElement(k.Z,null,c.createElement(w.Z,null,c.createElement(C.Z,null,c.createElement(A.Z,null,c.createElement(F.Z,null,"URL"),c.createElement(F.Z,null,"ご友人・ご知人のお名前"),c.createElement(F.Z,null,"お客様の氏名（ニックネーム可）"),c.createElement(F.Z,null,"ご関係"),c.createElement(F.Z,null,"操作"),c.createElement(F.Z,null,"タイムスタンプ"))),c.createElement(S.Z,null,void 0!==X&&X[0]?X.map((function(e,t){return c.createElement(Y,{key:t,clientsFriend:e,reload:function(){return de(me+1)}})})):c.createElement(A.Z,null,c.createElement(F.Z,{colSpan:6},c.createElement(D.Z,{align:"center"},void 0===X?c.createElement(c.Fragment,null,"Loading...",c.createElement(h.Z,null)):"まだご紹介データがありません。『新規作成』より作成ください。")))))),c.createElement(g.Z,{spacing:2,sx:{width:"100%"}},c.createElement(b.Z,{open:t,autoHideDuration:5e3,onClose:function(e,t){"clickaway"!==t&&n(!1)}},c.createElement(o.Z,{severity:s},U))))):c.createElement(c.Fragment,null)}}}]);
//# sourceMappingURL=component---src-pages-invitations-index-js-c392c5d44634ecd5e57c.js.map